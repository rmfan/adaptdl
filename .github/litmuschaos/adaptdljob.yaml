apiVersion: adaptdl.petuum.com/v1
kind: AdaptDLJob
metadata:
  generateName: linear-regression-
spec:
  template:
    spec:
      containers:
      - name: main
        image: python:3.7-slim
        command:
        - python3
        - /source/examples/linear_regression/main.py
        - --epochs=5
        env:
        - name: PYTHONUNBUFFERED
          value: "true"
        resources:
          limits:
            cpu: 100m
          requests:
            cpu: 100m
        volumeMounts:
        - mountPath:  /adaptdl/checkpoint
          name:        adaptdl-pvc
          subPath:    adaptdl/checkpoint
        - mountPath:  /adaptdl/share
          name:        adaptdl-pvc
          subPath:    adaptdl/share
        - mountPath: /source
          name:        adaptdl-source
      volumes:
      - name: adaptdl-pvc
        persistentVolumeClaim:
          claimName: adaptdl-pvc-local
      - name: adaptdl-source
        hostPath:
          .
